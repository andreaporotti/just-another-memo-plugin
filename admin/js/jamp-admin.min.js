!function(t){"use strict";t(function(){function e(e){0>t.inArray(".meta-section",e)&&(t("#jamp_meta_box .meta-section").hide().find("option:first").attr("selected","selected"),t("#jamp_meta_box #section").removeClass("form-field-invalid")),0>t.inArray(".meta-target-type",e)&&(t("#jamp_meta_box .meta-target-type").hide().find("option:first").attr("selected","selected"),t("#jamp_meta_box #target-type").removeClass("form-field-invalid")),0>t.inArray(".meta-target",e)&&(t("#jamp_meta_box .meta-target").hide().find("option:first").attr("selected","selected"),t("#jamp_meta_box #target").removeClass("form-field-invalid"))}function a(a){switch(a){case"global":e();break;case"section":e([".meta-section"]),t("#jamp_meta_box .meta-section").show();break;case"entity":e([".meta-target-type",".meta-target"]),t("#jamp_meta_box .meta-target-type").show(),t("#jamp_meta_box #target-type").trigger("change"),t("#jamp_meta_box .meta-target").show()}}function n(e,a){""!==e&&null!==e&&t.post(jamp_ajax.ajax_url,{_ajax_nonce:jamp_ajax.nonce,action:"move_to_trash",note:e},function(n){var o,i;let m,l,s,r,c,d,p;n.success?"column"===a?(o=e,m=t(".jamp-column-note[data-note="+o+"]"),l=m.parent("td"),s=l.find(".jamp-column-note").length,m.addClass("jamp-note--deleting").fadeOut(600,function(){t(this).remove(),s-1==0&&l.find(".jamp-column-note__no-notes-notice").removeClass("jamp-column-note__no-notes-notice--hidden")})):"adminbar"===a&&(i=e,r=t(".jamp-admin-bar-note[data-note="+i+"]"),c=r.data("scope"),d=r.parent(".jamp-admin-bar-section"),p=d.find(".jamp-admin-bar-note").length,r.addClass("jamp-note--deleting").fadeOut(600,function(){t(this).remove(),p-1==0&&d.find(".jamp-admin-bar-note__no-notes-notice").removeClass("jamp-admin-bar-note__no-notes-notice--hidden");let e;"global"===c?e=t("#wp-admin-bar-jamp .global-notes-count"):"section"===c&&(e=t("#wp-admin-bar-jamp .section-notes-count")),p-1==0?e.remove():e.text(p-1)})):alert(jamp_strings.move_to_trash_error)})}t("#jamp_meta_box #target-type").on("change",function(){var e;""!==(e=this.value)&&null!==e?t.post(jamp_ajax.ajax_url,{_ajax_nonce:jamp_ajax.nonce,action:"build_targets_list",target_type:e},function(e){if(e.success){let a="";t.each(e.data,function(t,e){a+=`<option class="target-entity" value="${e.id}">${e.title} (${e.status})</option>`}),t("#jamp_meta_box #target option.target-entity").remove(),t("#jamp_meta_box #target").append(a);let n=t("#jamp_meta_box #saved-target").val();t(`#jamp_meta_box #target option[value="${n}"]`).length>0?t("#jamp_meta_box #target").val(n):t("#jamp_meta_box #target").val("")}else alert(jamp_strings.get_entities_list_error)}):t("#jamp_meta_box #target option.target-entity").remove()}),t("#jamp_meta_box input[type=radio][name=scope]").on("change",function(){a(this.value)}),a(t("#jamp_meta_box input[type=radio][name=scope]:checked").val()),t(".jamp-column-note__note-trash-action").on("click",function(e){e.preventDefault();let a=t(this);t(".jamp-trash-dialog").dialog({modal:!0,closeText:"",buttons:{OK:function(){t(this).dialog("close"),n(a.data("note"),"column")}}})}),t(".jamp-admin-bar-action--trash").on("click",function(e){e.preventDefault();let a=t(this);t(".jamp-trash-dialog").dialog({modal:!0,closeText:"",buttons:{OK:function(){t(this).dialog("close"),n(a.data("note"),"adminbar")}}})}),t(".jamp-column-note__note-info-action").on("click",function(t){t.preventDefault()}),t(".jamp-admin-bar-action--info").on("click",function(e){e.preventDefault(),t(this).parent().nextAll(".jamp-admin-bar-note__details").slideToggle(100)}),t(".post-type-jamp_note #publish").on("click",function(e){let a=!1,n=t("#jamp_meta_box input[type=radio][name=scope]:checked");switch(n.val()){case"global":a=!0;break;case"section":let o=t("#jamp_meta_box #section");""!==o.val()&&null!==o.val()?(o.removeClass("form-field-invalid"),a=!0):(o.addClass("form-field-invalid"),a=!1);break;case"entity":let i=t("#jamp_meta_box #target-type"),m=t("#jamp_meta_box #target");""!==i.val()&&null!==i.val()?(i.removeClass("form-field-invalid"),a=!0):(i.addClass("form-field-invalid"),a=!1),""!==m.val()&&null!==m.val()?(m.removeClass("form-field-invalid"),a=!0):(m.addClass("form-field-invalid"),a=!1)}!1===a&&e.preventDefault()})})}(jQuery);